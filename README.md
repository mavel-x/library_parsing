# Парсер книг с сайта tululu.org и оффлайн-библиотека

Скачивайте книги в любом количестве. Просматривайте их на оффлайн-сайте.

## Как скачать библиотеку для чтения оффлайн
1. Над списком файлов репозитория нажмите Code -> Download ZIP.
2. Распакуйте архив в любом месте у себя на компьютере. 
3. Откройте файл index.html в любом браузере. 
4. Готово!

## Как читать онлайн
Откройте сайт на странице этого репозитория [по ссылке](https://mavel-x.github.io/library_parsing).

## Как установить проект на своем компьютере

Предварительное требование: python3.

Установить зависимости: 
```console
$ python3 -m pip install -r requirements.txt
```

## Как пользоваться парсером

### Скачать ряд книг по их ID

Чтобы скачать ряд книг по ID, запустите скрипт `parse_tululu.py`. Он принимает два позиционных аргумента: `start_id` и `end_id`,
что позволяет выбрать, с какой по какую книгу скачивать.
Запустите команду из директории скрипта:

```console
$ python3 parse_tululu.py 100 200
```

### Скачать книги с ряда страниц в разделе "Фантастика"

Чтобы скачать только книги из раздела "Фантастика", используйте скрипт `parse_tululu_category.py`.
Он принимает ряд позиционных и именованных аргументов.

Позиционные:
```
  start_page            с какой страницы раздела начать, по умолчанию - 1
  end_page              до какой страницы скачивать, по умолчанию - 10
```

Именованные:
```
  -d DEST_DIR, --dest_dir DEST_DIR
                        путь к каталогу с результатами парсинга, по умолчанию - ./
  -j JSON_PATH, --json_path JSON_PATH
                        путь к .json файлу для информации о скачанных книгах, по умолчанию - ./saved_books.json
  -ni, --skip_imgs      не скачивать картинки
  -nb, --skip_txt       не скачивать книги
```

Например, чтобы скачать страницы раздела с 450 по 500, сохранить их в папку "Новые книги" и не скачивать
обложки, запустите скрипт следующим образом:
```console
$ python3 parse_tululu_category.py 450 500 -d "Новые книги" -ni
```
<br>
По ходу скачивания в консоль выводятся данные о каждой книге:
Заголовок, автор, жанр(ы), комментарии.

Скачанные книги в формате .txt будут в директории books, а обложки книг --
в директории images.

## Как выложить скачанные книги на свой сайт
Используйте скрипт `render_website.py`. Он сверстает достаточно страниц для сайта,
чтобы разместить все скачанные книги по 20 книг на странице, а затем будет локально
раздавать сайт по адресу http://0.0.0.0:5500/pages/index1.html (адрес первой страницы).
Информация о скачанных книгах берется из файла `saved_books.json`, а сами книги и их обложки --
из директорий `books` и `images`, к которым ведут симлинки из директории `web/static`. 
Если во время парсинга tululu.org вы меняли названия или пути к этим файлам и директориям, 
придется указать правильные пути в скрипте `render_website.py`.

